<ion-content class="ion-padding">

  <ion-toolbar color="transparent" style="--background: transparent; box-shadow: none;">
    <ion-buttons slot="end">
      <ion-menu-button style="color: #073166; font-size: 24px; margin-right: 8px;">
      </ion-menu-button>
    </ion-buttons>
  </ion-toolbar>

  <div class="login-header" style="text-align: center; margin-bottom: 10px; margin-top: 10px;">
    <img src="assets/icon/logo.png" alt="Logo" class="app-logo" style="height: auto; width: 120px;"> 
  </div>

  <div class="welcome-container" style="text-align: center; margin-bottom: 10px;">
    <h2 style="font-size: 24px; margin-bottom: 5px;">Â¡Hola, {{ usuario }}!</h2>
  </div>

  <div class="map-container">
    <div id="mapId" style="height: 100%; width: 100%;"></div>
    
    <div *ngIf="!ubicacionActual" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 1000;">
       <ion-spinner name="dots"></ion-spinner>
    </div>
  </div>

  <ion-card style="margin-top: 20px; border-radius: 15px; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">
    <ion-card-content>
      <ion-item lines="none">
        <ion-label position="stacked" style="color: #073166; font-weight: bold;">1. Selecciona Destino</ion-label>
        <ion-select [(ngModel)]="destinoSeleccionado" placeholder="Â¿A dÃ³nde vas?">
          <ion-select-option *ngFor="let destino of destinos" [value]="destino.nombre">
            {{ destino.nombre }} (${{ destino.costo }})
          </ion-select-option>
        </ion-select>
      </ion-item>
    </ion-card-content>
  </ion-card>

  <h3 style="margin-left: 10px; color: #073166; font-size: 18px;">2. Elige Conductor</h3>
  
  <div *ngIf="!destinoSeleccionado" style="text-align: center; color: #999; padding: 20px;">
    <p>Selecciona un destino para ver conductores</p>
  </div>

  <ion-list *ngIf="destinoSeleccionado" style="background: transparent;">
    <ion-card *ngFor="let conductor of listaConductores" style="margin-bottom: 15px; border-radius: 15px;">
      <ion-item lines="none" style="--background: white;">
        <ion-avatar slot="start">
          <ion-icon name="car-sport" style="font-size: 40px; color: #39ccb1;"></ion-icon>
        </ion-avatar>
        <ion-label>
          <h2 style="font-weight: bold;">{{ conductor.nombre }}</h2>
          <p>{{ conductor.vehiculo }} | {{ conductor.patente }}</p>
          <p style="color: #f5bf42; font-size: 14px;">
            <ion-icon name="star"></ion-icon> {{ conductor.calificacion }}
          </p>
        </ion-label>
        <ion-button slot="end" (click)="pedirViaje(conductor)" shape="round" color="primary">
          Viajar
        </ion-button>
      </ion-item>
    </ion-card>
  </ion-list>

  <app-loader-overlay [visible]="cargando" [message]="mensajeCarga"></app-loader-overlay>

  <div class="success" *ngIf="mostrarAnimacion" style="text-align: center; margin-top: 25px;">
    <ng-lottie
      [options]="{ path: 'assets/animations/success.json', loop: false, autoplay: true }"
      width="200" height="200">
    </ng-lottie>
    <h3 style="color: #4499c0;">Â¡Conductor en camino! ðŸš—</h3>
  </div>
  
</ion-content>