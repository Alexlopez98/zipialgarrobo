<ion-content class="ion-padding perfil-page">
  
  <ion-header class="ion-no-border">
    <ion-toolbar style="--background: transparent;">
      <ion-buttons slot="start">
        <ion-button (click)="volver()" style="color: #073166;">
          <ion-icon name="arrow-back-outline" slot="icon-only"></ion-icon>
        </ion-button>
      </ion-buttons>
    </ion-toolbar>
  </ion-header>

  <div class="perfil-container">
    
    <div class="avatar-wrapper" (click)="cambiarFoto()">
      <ion-avatar class="avatar">
        <img [src]="fotoPerfil" alt="avatar" />
      </ion-avatar>
      <div class="camera-badge">
        <ion-icon name="camera-outline"></ion-icon>
      </div>
    </div>

    <h2>{{ usuario || 'Usuario sin nombre' }}</h2>

    <ion-card class="perfil-card">
      <ion-card-header>
        <ion-card-title style="text-align: center; color: #073166; font-weight: bold;">
          Información del Usuario
        </ion-card-title>
      </ion-card-header>

      <ion-card-content>
        
        <div class="input-group">
          <label>Usuario (ID)</label>
          <input 
            type="text" 
            [(ngModel)]="usuario" 
            readonly 
            class="letras-imput"
            style="opacity: 0.7; background-color: #e0e0e0;">
        </div>

        <div class="input-group">
          <label>Nombre Completo</label>
          <input 
            type="text" 
            [(ngModel)]="nombre" 
            class="letras-imput"
            placeholder="Tu nombre real">
        </div>

        <div class="input-group">
          <label>Contraseña</label>
          <input 
            type="password" 
            [(ngModel)]="password" 
            class="letras-imput"
            placeholder="••••" 
            minlength="4" 
            maxlength="4">
          <p style="font-size: 12px; color: #666; margin-top: 5px; margin-left: 5px;">
            * Debe ser numérica de 4 dígitos
          </p>
        </div>

        <div class="input-group">
          <label>Correo electrónico</label>
          <input 
            type="email" 
            [(ngModel)]="correo" 
            class="letras-imput"
            placeholder="ejemplo@correo.com">
        </div>

        <div class="input-group">
          <label>Teléfono</label>
          <input 
            type="tel" 
            [(ngModel)]="telefono" 
            class="letras-imput"
            placeholder="Ej: +56 9 1234 5678">
        </div>

        <div class="input-group">
          <label>Ubicación</label>
          <input 
            type="text" 
            [(ngModel)]="ubicacion" 
            class="letras-imput"
            placeholder="Ej: Algarrobo, Chile">
        </div>

      </ion-card-content>
    </ion-card>

    <ion-button expand="block" class="btn-guardar ion-margin-top" (click)="guardarCambios()" 
      style="--background: #186987; --border-radius: 20px;">
      GUARDAR CAMBIOS
    </ion-button>

    <ion-button expand="block" fill="outline" class="btn-cerrar ion-margin-top" (click)="cerrarSesion()" 
      style="--color: #eb445a; --border-color: #eb445a; --border-radius: 20px;">
      CERRAR SESIÓN
    </ion-button>
  </div>
  
</ion-content>

<div class="overlay" *ngIf="showLogoutOverlay">
  <div class="overlay-content">
    <ng-lottie [options]="{ path: 'assets/animations/exit.json', loop: false, autoplay: true }" width="220" height="220"></ng-lottie>
    <h3>Cerrando sesión...</h3>
  </div>
</div>
<app-loader-overlay [visible]="showLoader" [message]="'Guardando tus cambios...'"></app-loader-overlay>
<div class="success-message" *ngIf="showSuccessMessage">
  <ion-icon name="checkmark-circle-outline"></ion-icon>
  <p>Cambios guardados con éxito ✅</p>
</div>